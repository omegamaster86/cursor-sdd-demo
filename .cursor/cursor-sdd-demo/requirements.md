# 要件ドキュメント

## はじめに
本ドキュメントは、アンケートアプリの管理画面における機能要件を定義する。管理者がアンケートの作成・編集・配信・集計を効率的に行えるWebアプリケーションを構築する。

## 要件

### 要件 1: アンケート管理
**目的:** 管理者として、アンケートを作成・編集・削除したい。それにより効率的にアンケートを管理できる。

#### 受け入れ基準
1. When 管理者がアンケート作成ボタンをクリック, the 管理画面 shall アンケート作成フォームを表示する
2. When 管理者がアンケートを保存, the 管理画面 shall アンケートをデータベースに保存し、一覧画面に遷移する
3. When 管理者がアンケートを選択, the 管理画面 shall アンケートの詳細情報を表示する
4. When 管理者がアンケートを編集, the 管理画面 shall 既存のアンケート情報を編集フォームに表示する
5. When 管理者がアンケートを削除, the 管理画面 shall 確認ダイアログを表示し、確認後に削除を実行する

### 要件 2: 質問項目管理
**目的:** 管理者として、アンケート内の質問項目を柔軟に設定したい。それにより多様な調査目的に対応できる。

#### 受け入れ基準
1. When 管理者が質問を追加, the 管理画面 shall 新しい質問項目をアンケートに追加する
2. The 管理画面 shall 以下の質問タイプをサポートする: 単一選択、複数選択、自由記述、評価スケール
3. When 管理者が質問の順序を変更, the 管理画面 shall ドラッグ&ドロップで質問の並び替えを可能にする
4. When 管理者が選択肢を設定, the 管理画面 shall 選択式質問の選択肢を動的に追加・削除できる
5. Where 質問が必須に設定されている, the 管理画面 shall 回答者に必須マークを表示する

### 要件 3: アンケート配信管理
**目的:** 管理者として、アンケートの公開状態と配信期間を管理したい。それにより計画的なアンケート実施ができる。

#### 受け入れ基準
1. When 管理者が公開設定を変更, the 管理画面 shall アンケートの公開/非公開状態を切り替える
2. When 管理者が配信期間を設定, the 管理画面 shall 開始日時と終了日時を保存する
3. While 配信期間外, the 管理画面 shall アンケートを自動的に非公開状態にする
4. The 管理画面 shall アンケートの固有URLを生成し、管理者に表示する
5. When 管理者がURLをコピー, the 管理画面 shall クリップボードにURLをコピーする

### 要件 4: 回答データ集計・分析
**目的:** 管理者として、アンケートの回答結果を確認・分析したい。それにより調査結果を活用できる。

#### 受け入れ基準
1. When 管理者が集計画面を開く, the 管理画面 shall 回答数と回答率のサマリーを表示する
2. The 管理画面 shall 質問タイプに応じたグラフ（円グラフ、棒グラフ）で結果を可視化する
3. When 管理者がCSVエクスポートをクリック, the 管理画面 shall 回答データをCSV形式でダウンロードする
4. The 管理画面 shall 個別回答の一覧表示と詳細確認ができる
5. When 管理者が期間フィルターを適用, the 管理画面 shall 指定期間内の回答のみを表示する

### 要件 5: ユーザー認証・権限管理
**目的:** 管理者として、安全にシステムにアクセスしたい。それによりデータの保護と適切なアクセス制御ができる。

#### 受け入れ基準
1. When 未認証ユーザーが管理画面にアクセス, the 管理画面 shall ログイン画面にリダイレクトする
2. When 管理者がログイン情報を入力, the 管理画面 shall 認証を行い、成功時にダッシュボードを表示する
3. If 認証に失敗, the 管理画面 shall エラーメッセージを表示する
4. When 管理者がログアウト, the 管理画面 shall セッションを終了しログイン画面に遷移する
5. The 管理画面 shall セッションタイムアウト後に自動的にログアウトする

### 要件 6: ダッシュボード
**目的:** 管理者として、システム全体の状況を一目で把握したい。それにより効率的な運用管理ができる。

#### 受け入れ基準
1. When 管理者がログイン, the 管理画面 shall ダッシュボードをデフォルト表示する
2. The 管理画面 shall アクティブなアンケート数、本日の回答数、総回答数を表示する
3. The 管理画面 shall 最近のアンケート一覧（作成日時順）を表示する
4. When 管理者がアンケートをクリック, the 管理画面 shall 該当アンケートの詳細画面に遷移する

---

## 成果物（推奨）
このフェーズの出力を **設計の一次ソース** に落とし込むため、要件ドラフトが出た時点で以下を作成/更新する。

※ 自動初期作成（上書き禁止）のルールは `.cursor/rules/artifacts-generation.md` を参照。

- `.cursor/cursor-sdd-demo/artifacts/feature-list.md`（MVP/Phase と UI/API/Batch の一覧）

テンプレート:
- `.cursor/templates/artifacts/create-feature-list.md`

---

## 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
| ---- | ---------- | ------ | -------- |
| 2024/12/21 | v1.0 | - | 初版作成 |
