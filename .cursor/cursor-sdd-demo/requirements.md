# 要件ドキュメント

## プロジェクト説明（入力）
アンケートアプリの管理画面を作成したい

## はじめに
本ドキュメントは、アンケートアプリの管理画面における機能要件を定義する。管理者がアンケートの作成・編集・配信・回答収集・分析を効率的に行えるシステムを目指す。

---

## 要件

### 要件 1: アンケート管理
**目的:** 管理者として、アンケートを作成・編集・削除したい。それによりアンケートのライフサイクルを効率的に管理できる。

#### 受け入れ基準
1. When 管理者が新規作成ボタンをクリック, the 管理画面 shall アンケート作成フォームを表示する
2. When 管理者がアンケートを保存, the 管理画面 shall アンケートをドラフト状態で保存する
3. When 管理者がアンケートを編集, the 管理画面 shall 既存のアンケート内容を編集フォームに表示する
4. When 管理者がアンケートを削除, the 管理画面 shall 確認ダイアログを表示し、承認後に削除を実行する
5. The 管理画面 shall アンケート一覧をページネーション付きで表示する

### 要件 2: 質問設計
**目的:** 管理者として、様々な形式の質問を設計したい。それにより多様な回答形式でデータを収集できる。

#### 受け入れ基準
1. The 管理画面 shall 以下の質問形式をサポートする: 単一選択、複数選択、自由記述（短文）、自由記述（長文）、評価スケール
2. When 管理者が質問を追加, the 管理画面 shall 質問をアンケートに追加し、並び順を設定可能にする
3. When 管理者が質問をドラッグ&ドロップ, the 管理画面 shall 質問の並び順を変更する
4. Where 質問が必須に設定されている, the 管理画面 shall 必須マークを表示する
5. If 質問の形式が選択式, then the 管理画面 shall 選択肢の追加・編集・削除機能を提供する

### 要件 3: アンケート配信
**目的:** 管理者として、アンケートを対象者に配信したい。それにより効率的に回答を収集できる。

#### 受け入れ基準
1. When 管理者が配信設定を完了, the 管理画面 shall アンケートのステータスを「公開中」に変更する
2. The 管理画面 shall 回答用の公開URLを生成する
3. When 管理者が配信期間を設定, the 管理画面 shall 開始日時と終了日時を保存する
4. While アンケートが公開期間外, the 管理画面 shall アンケートへのアクセスを制限する
5. When 管理者がアンケートを一時停止, the 管理画面 shall ステータスを「一時停止」に変更し、回答受付を停止する

### 要件 4: 回答管理
**目的:** 管理者として、収集した回答を閲覧・管理したい。それにより回答データを適切に把握できる。

#### 受け入れ基準
1. The 管理画面 shall 回答一覧を回答日時順で表示する
2. When 管理者が回答詳細を選択, the 管理画面 shall 個別回答の全内容を表示する
3. The 管理画面 shall 回答データをCSV形式でエクスポートする機能を提供する
4. While 回答データをロード中, the 管理画面 shall ローディングインジケーターを表示する
5. If 回答が0件, then the 管理画面 shall 「回答がありません」メッセージを表示する

### 要件 5: 回答分析・集計
**目的:** 管理者として、回答データを分析・可視化したい。それにより意思決定に活用できるインサイトを得られる。

#### 受け入れ基準
1. The 管理画面 shall 選択式質問の回答を円グラフまたは棒グラフで可視化する
2. The 管理画面 shall 評価スケール質問の平均値・中央値を表示する
3. The 管理画面 shall 回答数の推移を時系列グラフで表示する
4. When 管理者がフィルタ条件を設定, the 管理画面 shall 条件に合致する回答のみを集計対象とする
5. The 管理画面 shall 集計結果をPDF形式でレポート出力する機能を提供する

### 要件 6: 認証・権限管理
**目的:** システム管理者として、ユーザーアクセスを管理したい。それによりセキュアな運用を実現できる。

#### 受け入れ基準
1. When ユーザーがログインを試行, the 管理画面 shall 認証情報を検証し、成功時にダッシュボードへ遷移する
2. If 認証に失敗, then the 管理画面 shall エラーメッセージを表示する
3. The 管理画面 shall ユーザーロール（管理者、編集者、閲覧者）による権限制御を行う
4. While ユーザーが未認証, the 管理画面 shall 保護されたページへのアクセスを拒否する
5. When セッションが期限切れ, the 管理画面 shall ログイン画面へリダイレクトする

---

## 変更履歴

| 日付 | バージョン | 変更者 | 変更内容 |
| ---- | ---------- | ------ | -------- |
| 2025-12-20 | v1.0 | System | 初版作成 |
